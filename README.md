# Embodied Aesthetic Reconstruction  
*Final MSc Project â€” University of the Arts London (CCI)*  

## ğŸŒ Overview  
This project, **Embodied Aesthetic Reconstruction**, explores how **motion capture** and **generative AI** can be used to resist disciplinary norms of body aesthetics.  
Instead of enforcing an â€œideal bodyâ€ shaped by algorithms, the system generates **playful, personalised artistic representations** that celebrate diverse embodiment.  

## âœ¨ Features  
- **Motion Capture Input** â†’ extract pose landmarks (via MediaPipe).  
- **Cross-modal Embeddings** â†’ fuse pose with personality traits (Big Five sliders).  
- **Generative Output**:  
  - *Visual*: Stylised image output (Diffusion/Dreambooth can be integrated).  
  - *Audio*: Soundscape generation (RAVE/AudioLM integration planned).  
- **Ethics by Design**: consent gate, data retention toggle, bias awareness.  

## ğŸš€ Installation  
Clone the repository and set up environment:  
```bash
git clone https://github.com/Vanillasky78/EmbodiedAestheticReconstruction.git
cd EmbodiedAestheticReconstruction
conda create -n ear-mvp python=3.10 -y
conda activate ear-mvp
pip install -r requirements.txt

streamlit run app.py

embodied-aesthetic-reconstruction/
â”œâ”€â”€ app.py                  # Streamlit entrypoint
â”œâ”€â”€ core/                   # Pose, personalisation, style selection, image ops
â”œâ”€â”€ audio/                  # Embedding â†’ audio synthesis
â”œâ”€â”€ ui/                     # Streamlit UI components
â”œâ”€â”€ ethics/                 # Consent text & ethics logic
â”œâ”€â”€ tests/                  # Unit tests
â”œâ”€â”€ outputs/                # Generated media (gitignored)
â”œâ”€â”€ requirements.txt        # Dependencies
â””â”€â”€ README.md               # Project description


cd ~/Documents/GitHub/EmbodiedAestheticReconstruction
conda env create -f environment.yml
conda activate ear-mvp
streamlit run app.py
------
conda activate ear-mvp
cd ~/Documents/GitHub/EmbodiedAestheticReconstruction
streamlit run app.py

------
# Embodied Aesthetic Reconstruction (macOS M4 Pro Setup)

An interactive AI system that matches human body poses to curated portrait artworks via **CLIP + Pose + Color fusion**.  
This guide explains how to install and run the project smoothly on Apple Silicon (M-series) macOS.

---

## ğŸ§© 1. Environment Setup (Miniforge + Conda + MPS)

> Tested on macOS Sequoia 15.7 / Apple M4 Pro / Python 3.10 + PyTorch 2.2 MPS

### 1.1 Install Miniforge (or Miniconda for Apple Silicon)
Download and run:

```bash
/bin/bash -c "$(curl -fsSL https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-MacOSX-arm64.sh)"

Restart your terminal after installation.
1.2 Create and activate environment
Inside your project folder:
cd ~/Documents/GitHub/EmbodiedAestheticReconstruction
conda create -n ear-mvp python=3.10 -y
conda activate ear-mvp
1.3 Install dependencies
Use either the YAML file or the requirements.txt:
conda env update -f environment.yml
# or
pip install -r requirements.txt
Confirm installation and device support:
python -m torch.utils.collect_env
You should see MPS available: True.

ğŸš€ 2. Run the App
conda activate ear-mvp
cd ~/Documents/GitHub/EmbodiedAestheticReconstruction
streamlit run app.py
Then open the auto-generated local URL, usually:
http://localhost:8501
Youâ€™ll see:
Left sidebar: weight sliders, filters, and device status
Main area: camera capture or image upload interface
Results: Top-K portrait matches with metadata and scores
ğŸ–¼ï¸ 3. Dataset Preparation
Your project expects:
data/
â”œâ”€â”€ images/                  â† portrait images (.jpg or .png)
â”œâ”€â”€ interim/                 â† camera captures (autogenerated)
â”œâ”€â”€ portrait_works.csv       â† metadata (title / artist / year / license)
âš ï¸ Important for iCloud Users
If your data/images folder is synced via iCloud, some files may appear as:
DaVinci_Ginevra.jpg.icloud
Those are not downloaded yet.
In Finder:
right-click data/images â†’ Download Now
All images must be fully local before running the app.
ğŸ§  4. Main Features
CLIP image embeddings ( open_clip_torch ViT-B-32 )
YOLOv8n-Pose via ultralytics (works on MPS)
Color histogram features (HSV fusion)
Adjustable weights for CLIP / Pose / Color
Public-Domain filter (based on license field in CSV)
Automatic embedding cache in .clip_cache/
âš™ï¸ 5. Troubleshooting Guide
âŒ â€œInvalid CUDA device '0'â€
Apple Silicon does not support CUDA.
Fixed in this version (yolo_device() maps to MPS).
If you still see it, re-run after saving app.py.
âŒ â€œSearch failed: Error opening data/imagesâ€
The folder exists but contains .icloud files.
Right-click â†’ Download Now, then reload Streamlit.
âŒ â€œNo pose feature detectedâ€
Pose estimation runs best in well-lit images with visible upper body.
Try raising the Pose weight slider to 0.3 and Color weight to 0.2.
ğŸ“¸ Camera Access
If Streamlit cannot access your camera:
System Settings â†’ Privacy & Security â†’ Camera â†’ allow Terminal.app
ğŸ“¦ 6. Development Tips
Task	Command
Update env	conda env update -f environment.yml --prune
Clear cache	rm -rf .clip_cache
Rebuild embeddings	Delete .clip_cache â†’ restart app
Export requirements	pip freeze > requirements.txt
ğŸ§‘â€ğŸ¨ 7. Credits
Author: Xinyi Zhang
Project: Embodied Aesthetic Reconstruction
Institute: UAL â€“ Creative Computing Institute (MSc Computing and Creative Industry)
Enjoy exploring your embodied-AI portrait system on macOS ğŸ’«


EAR System Architecture Diagram (Text Layout)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ‘© Audience          â”‚
â”‚  Moves or stands in front  â”‚
â”‚  of camera (pose changes)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ¨ Streamlit Frontend (UI)
â”‚  -----------------------------
â”‚  1ï¸âƒ£ Captures camera input
â”‚  2ï¸âƒ£ Detects stillness (optional)
â”‚  3ï¸âƒ£ Sends captured image to API
â”‚  4ï¸âƒ£ Displays matched artworks
â”‚
â”‚  Modes:
â”‚   â€¢ Local (runs PoseMatcher directly)
â”‚   â€¢ Remote (calls FastAPI backend)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   âš™ï¸ FastAPI Backend (Engine)
â”‚  -----------------------------
â”‚  Receives image â†’ runs matching:
â”‚   1ï¸âƒ£ YOLOv8-Pose (keypoints)
â”‚   2ï¸âƒ£ OpenCLIP (embeddings)
â”‚   3ï¸âƒ£ Cosine similarity vs database
â”‚  Returns JSON results to frontend
â”‚
â”‚  API endpoints:
â”‚   - /match
â”‚   - /list_museums
â”‚   - /metadata/{museum}/{filename}
â”‚   - /status
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ—‚ï¸ Data Layer (Artworks DB)
â”‚  -----------------------------
â”‚  - data/local/images/ (artwork images)
â”‚  - data/local/embeddings.npy
â”‚  - data/local/embeddings_meta.csv
â”‚  - metadata: artist, title, year, etc.
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EmbodiedAestheticReconstruction/
â”‚
â”œâ”€â”€ backend/                           âœ… FastAPI åç«¯
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                         âœ… ä¸»å…¥å£ï¼ˆå¯åŠ¨ FastAPIï¼‰
â”‚   â”œâ”€â”€ config.py                       âœ… å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â”œâ”€â”€ model/                          âœ… æ ¸å¿ƒç®—æ³•ï¼ˆå§¿æ€åŒ¹é…ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ pose_matcher.py
â”‚   â”‚   â”œâ”€â”€ utils.py
â”‚   â”‚   â””â”€â”€ yolov8n-pose.pt
â”‚   â””â”€â”€ tools/                          âœ… å·¥å…·è„šæœ¬
â”‚       â”œâ”€â”€ build_embeddings.py
â”‚       â””â”€â”€ ï¼ˆå…¶ä»–è¾…åŠ©è„šæœ¬ï¼‰
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ local/                          âœ… å½“å‰ä½¿ç”¨çš„ museum æ•°æ®æº
â”‚   â”‚   â”œâ”€â”€ images/                     âœ… ä½œå“å›¾ç‰‡ï¼ˆ16å¼ ï¼‰
â”‚   â”‚   â”œâ”€â”€ embeddings.npy              âœ… å‘é‡æ–‡ä»¶ï¼ˆå‹¿åˆ ï¼‰
â”‚   â”‚   â”œâ”€â”€ embeddings_meta.csv         âœ… è‡ªåŠ¨ç”Ÿæˆçš„ç´¢å¼•ï¼ˆå‹¿åˆ ï¼‰
â”‚   â”‚   â””â”€â”€ portrait_works.csv          âœ… ä½ æ‰‹åŠ¨ç¼–è¾‘çš„å…ƒæ•°æ®ï¼ˆä¸»æ–‡ä»¶ï¼‰
â”‚   â””â”€â”€ ï¼ˆå¯é€‰å…¶ä»– museumï¼Œå¦‚ met/ tateï¼‰
â”‚
â”œâ”€â”€ frontend/                           âœ… Streamlit å‰ç«¯
â”‚   â”œâ”€â”€ app_frontend.py                 âœ… ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ app_curatorial.py               ï¼ˆå¯ä¿ç•™å¤‡ç”¨ï¼‰
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ .streamlit/                     âœ… é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚
â”œâ”€â”€ scripts/                            âœ… ç¯å¢ƒä¸æ£€æµ‹å·¥å…·
â”‚   â”œâ”€â”€ setup_check.py
â”‚   â”œâ”€â”€ start_local.sh                  âœ… å¯é€‰ä¸€é”®å¯åŠ¨è„šæœ¬ï¼ˆMacï¼‰
â”‚   â””â”€â”€ start_local.bat                 âœ… å¯é€‰ä¸€é”®å¯åŠ¨è„šæœ¬ï¼ˆWindowsï¼‰
â”‚
â”œâ”€â”€ README.md                           âœ… å·¥ç¨‹è¯´æ˜
â”œâ”€â”€ environment.yml                     âœ… Conda ç¯å¢ƒé…ç½®
â””â”€â”€ .gitignore                          âœ… å¿½ç•¥æ–‡ä»¶
